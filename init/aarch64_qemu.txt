apt --no-install-recommends install curl ca-certificates xz-utils vim apt-file cpio

apt --no-install-recommends install clang make flex bison libncurses-dev lld bc llvm libssl-dev
# only latest
apt --no-install-recommends install clang-16 make flex bison libncurses-dev lld-16 bc llvm-16 libssl-dev

# latest
export ARCH=arm64
export CROSS_COMPILE=aarch64-linux-gnu-
export LLVM=-16

# linux 5.10
export LLVM=1
export LLVM_IAS=1

make CC=clang-17 LD=ld.lld-17 AR=llvm-ar-17 NM=llvm-nm-17 STRIP=llvm-strip-17 \
  OBJCOPY=llvm-objcopy-17 OBJDUMP=llvm-objdump-17 READELF=llvm-readelf-17 \
  HOSTCC=clang-17 HOSTCXX=clang++-17 HOSTAR=llvm-ar-17 HOSTLD=ld.lld-17

# linux 4.19
export CC=clang
export LD=ld.lld

apt --no-install-recommends install qemu-system-arm ipxe-qemu
qemu-system-aarch64 -machine virt -cpu cortex-a76 -nographic -smp 1 -m 4g -kernel Image -initrd rootfs_empty_newc.cpio.gz -append 'rdinit=/a.out'
